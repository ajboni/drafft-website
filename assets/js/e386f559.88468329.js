"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6948],{33090:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"reference/drafft-scripting-syntax","title":"Drafft Scripting Syntax","description":"Drafft\'s powerful script editor uses simple plain text to tell your game\'s characters exactly what to do and how to do it.","source":"@site/docs/02-reference/01__drafft-scripting-syntax.mdx","sourceDirName":"02-reference","slug":"/reference/drafft-scripting-syntax","permalink":"/docs/reference/drafft-scripting-syntax","draft":false,"unlisted":false,"editUrl":"https://github.com/ajboni/drafft-website/edit/main/docs/02-reference/01__drafft-scripting-syntax.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Drafft Scripting Syntax","description":"Drafft\'s powerful script editor uses simple plain text to tell your game\'s characters exactly what to do and how to do it.","caption":"Drafft Scripting Syntax"},"sidebar":"tutorialSidebar","previous":{"title":"Reference","permalink":"/docs/reference/"},"next":{"title":"State & Simulation Lifecycle","permalink":"/docs/reference/state-and-simulation-lifecycle"}}');var r=i(74848),l=i(28453);const t={title:"Drafft Scripting Syntax",description:"Drafft's powerful script editor uses simple plain text to tell your game's characters exactly what to do and how to do it.",caption:"Drafft Scripting Syntax"},a="Scripting Syntax",d={},o=[{value:"Scripting Rules",id:"scripting-rules",level:2},{value:"Evaluation Contexts",id:"evaluation-contexts",level:2},{value:"Export Context",id:"export-context",level:3},{value:"Simulation Context (Dialogue Simulator)",id:"simulation-context-dialogue-simulator",level:3},{value:"Runtime Context",id:"runtime-context",level:3},{value:"Context Summary",id:"context-summary",level:3},{value:"Comments",id:"comments",level:2},{value:"Example",id:"example",level:3},{value:"Actor Line (with Speech Tag)",id:"actor-line-with-speech-tag",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Structure",id:"structure",level:3},{value:"Actor Identifier",id:"actor-identifier",level:4},{value:"Dialogue Text",id:"dialogue-text",level:4},{value:"Speech Tags",id:"speech-tags",level:3},{value:"Purpose of Speech Tags",id:"purpose-of-speech-tags",level:4},{value:"Automatic Generation",id:"automatic-generation",level:4},{value:"Manual Tags (Optional)",id:"manual-tags-optional",level:4},{value:"Format Rules",id:"format-rules",level:4},{value:"Execution Behavior",id:"execution-behavior",level:4},{value:"Audio Tag Extraction",id:"audio-tag-extraction",level:4},{value:"Design Rationale",id:"design-rationale",level:4},{value:"Expression Annotation",id:"expression-annotation",level:3},{value:"Examples",id:"examples",level:3},{value:"Export Behavior",id:"export-behavior",level:3},{value:"Design Notes",id:"design-notes",level:3},{value:"Commands",id:"commands",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Examples",id:"examples-1",level:3},{value:"Special Cases",id:"special-cases",level:3},{value:"Execution Semantics",id:"execution-semantics",level:3},{value:"Export Mappings",id:"export-mappings",level:3},{value:"Design Rationale",id:"design-rationale-1",level:3},{value:"Control Flow Statements",id:"control-flow-statements",level:2},{value:"Expressions and Resolution Model",id:"expressions-and-resolution-model",level:3},{value:"Uniqueness and Validation",id:"uniqueness-and-validation",level:4},{value:"<code>@if</code>",id:"if",level:3},{value:"Evaluation Context",id:"evaluation-context",level:4},{value:"Multi-Way Branching",id:"multi-way-branching",level:4},{value:"<code>@else</code>",id:"else",level:3},{value:"<code>@endif</code>",id:"endif",level:3},{value:"Script Player Feedback",id:"script-player-feedback",level:4},{value:"State Assignment",id:"state-assignment",level:2},{value:"<code>@set</code>",id:"set",level:3},{value:"Evaluation Context",id:"evaluation-context-1",level:4},{value:"Rules",id:"rules",level:4},{value:"Compound Assignment Operators",id:"compound-assignment-operators",level:4},{value:"Inline Interpolation (<code>${}</code>)",id:"inline-interpolation-",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Examples",id:"examples-2",level:3},{value:"Supported Expressions",id:"supported-expressions",level:3},{value:"What <code>${}</code> Is Not",id:"what--is-not",level:3},{value:"Relationship to Control Flow",id:"relationship-to-control-flow",level:3},{value:"Data Resolution: State vs Defaults",id:"data-resolution-state-vs-defaults",level:2},{value:"Resolution Summary",id:"resolution-summary",level:3},{value:"Notes",id:"notes",level:3},{value:"Mental Model",id:"mental-model",level:3},{value:"Inline JSON",id:"inline-json",level:2},{value:"Common Misconceptions",id:"common-misconceptions",level:2}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"scripting-syntax",children:"Scripting Syntax"})}),"\n",(0,r.jsx)(n.p,{children:"The idea behind Drafft is that it should be engine- and language-agnostic. You are free to use whatever language you prefer for your game logic and runtime. However, certain features \u2014 such as dialogue flow, narration, and commands \u2014 require identifying the purpose of each line."}),"\n",(0,r.jsx)(n.p,{children:"For this reason, the Drafft scripting syntax (UAF) exists."}),"\n",(0,r.jsxs)(n.p,{children:["UAF is intentionally minimal. It is designed to add ",(0,r.jsx)(n.strong,{children:"structure and meaning"})," to plain text without turning it into a full programming language. If you do not need these features, the syntax can be safely ignored."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"scripting-rules",children:"Scripting Rules"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Scripts are read ",(0,r.jsx)(n.strong,{children:"top to bottom"}),", one line at a time."]}),"\n",(0,r.jsxs)(n.li,{children:["Each line has a ",(0,r.jsx)(n.strong,{children:"single, clear purpose"})," (dialogue, comment, command, or control flow)."]}),"\n",(0,r.jsxs)(n.li,{children:["Control flow statements (",(0,r.jsx)(n.code,{children:"@if"}),", ",(0,r.jsx)(n.code,{children:"@elseif"}),", ",(0,r.jsx)(n.code,{children:"@else"}),", ",(0,r.jsx)(n.code,{children:"@endif"}),") never produce output on their own."]}),"\n",(0,r.jsx)(n.li,{children:"Lines inside inactive control blocks are skipped entirely."}),"\n",(0,r.jsx)(n.li,{children:"State changes persist forward for the remainder of the script."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"evaluation-contexts",children:"Evaluation Contexts"}),"\n",(0,r.jsx)(n.p,{children:"Drafft scripts can be interpreted in different contexts depending on how they are used."}),"\n",(0,r.jsxs)(n.p,{children:["The scripting syntax always describes ",(0,r.jsx)(n.strong,{children:"structure and intent"}),".",(0,r.jsx)(n.br,{}),"\n","Whether that intent is evaluated or executed depends on the context."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"export-context",children:"Export Context"}),"\n",(0,r.jsx)(n.p,{children:"During export:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No game state is assumed"}),"\n",(0,r.jsx)(n.li,{children:"Control flow is preserved, not evaluated"}),"\n",(0,r.jsx)(n.li,{children:"Conditions are not resolved"}),"\n",(0,r.jsx)(n.li,{children:"Commands are emitted as descriptive instructions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This ensures scripts remain engine-agnostic, portable, and safe to transform."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"simulation-context-dialogue-simulator",children:"Simulation Context (Dialogue Simulator)"}),"\n",(0,r.jsx)(n.p,{children:"The Dialogue Simulator evaluates scripts using a temporary, simulated state."}),"\n",(0,r.jsx)(n.p,{children:"In this context:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Conditions are evaluated"}),"\n",(0,r.jsx)(n.li,{children:"Control flow is executed"}),"\n",(0,r.jsx)(n.li,{children:"Variable assignments affect simulated state"}),"\n",(0,r.jsx)(n.li,{children:"Commands may be visualized or logged, but not executed"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This allows authors to preview dialogue flow and branching logic without running the game."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"runtime-context",children:"Runtime Context"}),"\n",(0,r.jsx)(n.p,{children:"At runtime:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The game engine owns the state"}),"\n",(0,r.jsx)(n.li,{children:"Conditions are evaluated using live game data"}),"\n",(0,r.jsx)(n.li,{children:"Commands are executed according to engine logic"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"context-summary",children:"Context Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Context"}),(0,r.jsx)(n.th,{children:"State Exists"}),(0,r.jsx)(n.th,{children:"Conditions Evaluated"}),(0,r.jsx)(n.th,{children:"Commands Executed"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Export"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Dialogue Simulator"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Simulated"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Game Runtime"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Drafft defines structure and intent.",(0,r.jsx)(n.br,{}),"\n","Evaluation depends on context."]})})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"comments",children:"Comments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"// Comment\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Comments are lines that are commonly ignored in the target engine.\nDrafft will include comments in the ",(0,r.jsx)(n.a,{href:"./screenplay_generation",children:"screenplay"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"// INT. SUBURBAN HOME - KITCHEN - NIGHT\n// FILBERT (9), wiry, lost in his own imaginary world. Dressed as a Knight. A toy sword in his other hand.\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"actor-line-with-speech-tag",children:"Actor Line (with Speech Tag)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Actor:: Actor Line [expression]\n[#speechTag]::Actor:: Actor Line [expression]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Actor lines are the ",(0,r.jsx)(n.strong,{children:"core building block"})," of Drafft scripting.\nThey represent a line of dialogue spoken by an actor and carry semantic meaning beyond simple text."]}),"\n",(0,r.jsxs)(n.p,{children:["An actor line is still valid, readable text on its own, but the syntax allows Drafft to identify ",(0,r.jsx)(n.em,{children:"who"})," is speaking, ",(0,r.jsx)(n.em,{children:"what"})," is being said, and ",(0,r.jsx)(n.em,{children:"how"})," that line should be interpreted or exported."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsx)(n.p,{children:"Actor lines serve multiple roles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Identify actors to build and maintain the ",(0,r.jsx)(n.strong,{children:"actor database"})]}),"\n",(0,r.jsxs)(n.li,{children:["Identify spoken dialogue to ",(0,r.jsx)(n.strong,{children:"generate voice-over references"})]}),"\n",(0,r.jsxs)(n.li,{children:["Include dialogue lines in the ",(0,r.jsx)(n.strong,{children:"generated screenplay"})]}),"\n",(0,r.jsxs)(n.li,{children:["Attach ",(0,r.jsx)(n.strong,{children:"expressions or annotations"})," to dialogue without breaking readability"]}),"\n",(0,r.jsx)(n.li,{children:"Allow remapping to engine-specific formats during export"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"structure",children:"Structure"}),"\n",(0,r.jsx)(n.h4,{id:"actor-identifier",children:"Actor Identifier"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Actor::\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Actor"})," is treated as an identifier, not executable code"]}),"\n",(0,r.jsx)(n.li,{children:"The name is not validated or interpreted by the scripting system"}),"\n",(0,r.jsx)(n.li,{children:"The same actor name can appear across multiple scripts"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"dialogue-text",children:"Dialogue Text"}),"\n",(0,r.jsx)(n.p,{children:"The dialogue text is the spoken content of the line and may include inline expressions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Aries:: I have ${v.player.totalCoins} coins.\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"speech-tags",children:"Speech Tags"}),"\n",(0,r.jsx)(n.p,{children:"Speech tags are optional identifiers used to uniquely reference a specific line of dialogue."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#speechTag_abcd]::Actor:: Actor Line\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In most cases, ",(0,r.jsx)(n.strong,{children:"speech tags are automatically generated by Drafft"})," and do not need to be written manually."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"purpose-of-speech-tags",children:"Purpose of Speech Tags"}),"\n",(0,r.jsx)(n.p,{children:"Speech tags are primarily intended for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Voice-over pipelines"}),"\n",(0,r.jsx)(n.li,{children:"Audio asset linking"}),"\n",(0,r.jsx)(n.li,{children:"Localization workflows"}),"\n",(0,r.jsx)(n.li,{children:"Stable references across exports and revisions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"They allow dialogue lines to be tracked independently of their position in a script or their literal text."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"automatic-generation",children:"Automatic Generation"}),"\n",(0,r.jsx)(n.p,{children:"When desired, Drafft automatically generates a speech tag for actor lines that do not already have one."}),"\n",(0,r.jsx)(n.p,{children:"Generated tags are based on:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The document alias"}),"\n",(0,r.jsx)(n.li,{children:"A short, random identifier"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This ensures:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tags are stable within a document"}),"\n",(0,r.jsx)(n.li,{children:"Collisions are extremely unlikely"}),"\n",(0,r.jsx)(n.li,{children:"Tags remain human-readable and diff-friendly"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example of an auto-generated tag:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#intro_a9F3]::Aries:: It's quieter than I expected.\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"manual-tags-optional",children:"Manual Tags (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"While speech tags are usually auto-generated, they may also be written manually when explicit control is required."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#line001_abcd]::Travis:: You talkin' to me?\n"})}),"\n",(0,r.jsx)(n.p,{children:"Manual tags must follow the same format and uniqueness rules as generated tags."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"format-rules",children:"Format Rules"}),"\n",(0,r.jsx)(n.p,{children:"Speech tags must:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Be wrapped in square brackets"}),"\n",(0,r.jsxs)(n.li,{children:["Start with ",(0,r.jsx)(n.code,{children:"#"})]}),"\n",(0,r.jsx)(n.li,{children:"Contain only alphanumeric characters, underscores, or dots"}),"\n",(0,r.jsxs)(n.li,{children:["Have a minimum length of 6 characters (excluding ",(0,r.jsx)(n.code,{children:"#"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Valid examples:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#intro_4aZ9]\n[#scene01.line02]\n[#npcGreeting]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Invalid examples:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#hi]          // too short\n[#hello-world] // invalid character\n[# hello ]     // spaces not allowed\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"execution-behavior",children:"Execution Behavior"}),"\n",(0,r.jsx)(n.p,{children:"Speech tags:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Do not affect control flow"}),"\n",(0,r.jsx)(n.li,{children:"Do not affect execution"}),"\n",(0,r.jsx)(n.li,{children:"Are ignored at runtime"}),"\n",(0,r.jsx)(n.li,{children:"Are preserved during export"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["They exist purely as ",(0,r.jsx)(n.strong,{children:"metadata"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"audio-tag-extraction",children:"Audio Tag Extraction"}),"\n",(0,r.jsx)(n.p,{children:"During export or processing, the speech tag identifier can be extracted without the surrounding brackets for use in audio or localization systems."}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#library_8F2a]::Kenji:: Wow, it\u2019s peaceful in here.\n"})}),"\n",(0,r.jsx)(n.p,{children:"May produce:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"library_8F2a\n"})}),"\n",(0,r.jsx)(n.p,{children:"as an audio or localization key."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"design-rationale",children:"Design Rationale"}),"\n",(0,r.jsx)(n.p,{children:"Speech tags are designed to be:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Mostly invisible to writers"}),"\n",(0,r.jsx)(n.li,{children:"Automatically managed by the tool"}),"\n",(0,r.jsx)(n.li,{children:"Stable across script edits"}),"\n",(0,r.jsx)(n.li,{children:"Friendly to external pipelines"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This keeps scripts readable while still supporting production workflows."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"expression-annotation",children:"Expression Annotation"}),"\n",(0,r.jsx)(n.p,{children:"An (Optional) expression annotation can be added at the end of the line to provide contextual information, such as tone, emotion, or delivery."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Actor:: Actor Line [expression]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Expression annotations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Are treated as metadata"}),"\n",(0,r.jsx)(n.li,{children:"Do not affect control flow or execution"}),"\n",(0,r.jsx)(n.li,{children:"Are included in screenplay and export outputs"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Tyler:: The first rule of Fight Club is: You do not talk about Fight Club. [serious]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#line001_abcd]::Travis:: You talkin' to me?\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"[#greeting_soft]::Aries:: It's nice to see you again. [warm]\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"export-behavior",children:"Export Behavior"}),"\n",(0,r.jsx)(n.p,{children:"Actor lines can be transformed during export to match the syntax or conventions of the target engine or pipeline."}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Renaming actors"}),"\n",(0,r.jsx)(n.li,{children:"Converting speech tags to engine IDs"}),"\n",(0,r.jsx)(n.li,{children:"Stripping or mapping expression annotations"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"./exporting",children:"Export Mappings"})," for more details."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"design-notes",children:"Design Notes"}),"\n",(0,r.jsx)(n.p,{children:"Actor lines are intentionally:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Human-readable"}),"\n",(0,r.jsx)(n.li,{children:"Diff-friendly"}),"\n",(0,r.jsx)(n.li,{children:"Independent of any specific engine or runtime"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This allows Drafft scripts to function both as ",(0,r.jsx)(n.strong,{children:"working data"})," and as ",(0,r.jsx)(n.strong,{children:"long-term narrative documentation"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(n.p,{children:["Commands represent ",(0,r.jsx)(n.strong,{children:"engine-defined actions"})," expressed declaratively inside a Drafft script."]}),"\n",(0,r.jsxs)(n.p,{children:["Drafft ",(0,r.jsx)(n.strong,{children:"does not execute commands"}),".\nInstead, commands are preserved, identified, and exported so they can be interpreted by the target game engine, runtime, or pipeline."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"<CommandName(arg1, arg2)>\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CommandName"})," is an identifier"]}),"\n",(0,r.jsx)(n.li,{children:"Arguments are passed as plain values or expressions"}),"\n",(0,r.jsx)(n.li,{children:"Drafft does not validate command names or arguments"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:'<PlayBackgroundMusic("calm_library")>\n<Pause(2)>\n<ShowCharacter("Aries", "smiling")>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"special-cases",children:"Special Cases"}),"\n",(0,r.jsxs)(n.p,{children:["Fade commands ",(0,r.jsx)(n.code,{children:"<FadeOut(?params)>"})," and ",(0,r.jsx)(n.code,{children:"<FadeIn(?params)>"})," also get some special treatment in the screenplay output."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"execution-semantics",children:"Execution Semantics"}),"\n",(0,r.jsx)(n.p,{children:"From Drafft\u2019s perspective:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Commands are ",(0,r.jsx)(n.strong,{children:"descriptive"}),", not executable"]}),"\n",(0,r.jsx)(n.li,{children:"They are emitted in order during export"}),"\n",(0,r.jsx)(n.li,{children:"They are included in simulation only if their surrounding control flow is active"}),"\n",(0,r.jsx)(n.li,{children:"Their meaning is defined entirely by the target engine or toolchain"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Drafft treats commands as ",(0,r.jsx)(n.strong,{children:"structured intent"}),", not behavior."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"export-mappings",children:"Export Mappings"}),"\n",(0,r.jsx)(n.p,{children:"Commands may be transformed during export to match the conventions or APIs of the target engine."}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Renaming commands"}),"\n",(0,r.jsx)(n.li,{children:"Rewriting arguments"}),"\n",(0,r.jsx)(n.li,{children:"Converting commands into function calls, events, or data structures"}),"\n",(0,r.jsx)(n.li,{children:"Removing unsupported commands"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"./exporting",children:"Export Mappings"})," for details."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"design-rationale-1",children:"Design Rationale"}),"\n",(0,r.jsx)(n.p,{children:"Commands are intentionally:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Engine-agnostic"}),"\n",(0,r.jsx)(n.li,{children:"Non-executable within Drafft"}),"\n",(0,r.jsx)(n.li,{children:"Easy to identify and transform"}),"\n",(0,r.jsx)(n.li,{children:"Safe to ignore if unsupported"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This allows Drafft scripts to remain portable, readable, and adaptable across different engines and workflows without embedding engine logic into the scripting language itself."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"control-flow-statements",children:"Control Flow Statements"}),"\n",(0,r.jsxs)(n.p,{children:["Control flow statements define ",(0,r.jsx)(n.strong,{children:"conditional structure"})," inside a script."]}),"\n",(0,r.jsxs)(n.p,{children:["They describe ",(0,r.jsx)(n.em,{children:"intent and structure"}),", not execution.\nWhether conditions are evaluated depends on the ",(0,r.jsx)(n.strong,{children:"evaluation context"})," (export, simulation, or runtime)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"expressions-and-resolution-model",children:"Expressions and Resolution Model"}),"\n",(0,r.jsxs)(n.p,{children:["All expressions reference values from the ",(0,r.jsx)(n.strong,{children:"evaluation context"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Values are always accessed using the same structural pattern:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<collection>.<_sid>.<property>\n"})}),"\n",(0,r.jsx)(n.p,{children:"The _sid is a human-readable, author-defined identifier used exclusively for scripting and expression resolution."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'_sid: forestTrial\ntitle: "The Forest Trial"\ndifficulty: Easy\n'})}),"\n",(0,r.jsx)(n.h4,{id:"uniqueness-and-validation",children:"Uniqueness and Validation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"\\_sid"})," must be unique within its collection"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Conflicts are reported by Drafft during validation"}),"\n",(0,r.jsxs)(n.li,{children:["Scripts referencing ambiguous or missing ",(0,r.jsx)(n.code,{children:"\\_sid"})," values cannot be simulated or exported"]}),"\n",(0,r.jsx)(n.li,{children:"Drafft provides tooling assistance to help identify and resolve conflicts early."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Common roots include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"defaults"})," (or ",(0,r.jsx)(n.code,{children:"d"}),") \u2014 authored default values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variables"})," (or ",(0,r.jsx)(n.code,{children:"v"}),") \u2014 variables properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"quest"})," (or ",(0,r.jsx)(n.code,{children:"q"}),") \u2014 quest properties and state (available in future versions)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"items"})," (or ",(0,r.jsx)(n.code,{children:"i"}),") \u2014 item properties (available in future versions)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"actors"})," (or ",(0,r.jsx)(n.code,{children:"a"}),") \u2014 actor properties (available in future versions)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Examples:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"variables.player.courage\nquest.forestTrial.courage\n\nExamples below will be available in future versions.\n\nitems.healthPotion.count\nactors.Aries.mood\nv.settings.speechVolume\ni.sword.damage\na.Aries.mood\n"})}),"\n",(0,r.jsx)(n.p,{children:"This consistency keeps scripts predictable, diff-friendly, and engine-agnostic."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"if",children:(0,r.jsx)(n.code,{children:"@if"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@if <expression>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Defines a conditional block.\nThe enclosed lines belong to the branch that should be taken ",(0,r.jsx)(n.strong,{children:"if the expression evaluates to true"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@if variables.player.courage > 5\n::Aries:: You seem more confident.\n@else\n::Aries:: Still working on your courage?\n@endif\n"})}),"\n",(0,r.jsx)(n.h4,{id:"evaluation-context",children:"Evaluation Context"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export context"}),"\nThe condition is preserved as-is. No evaluation occurs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simulation context"}),"\nThe expression is evaluated using simulated state to preview dialogue flow."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Runtime context"}),"\nThe expression is evaluated by the game engine if required"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"multi-way-branching",children:"Multi-Way Branching"}),"\n",(0,r.jsxs)(n.p,{children:["For 3+ options, use nested ",(0,r.jsx)(n.code,{children:"@if"})," blocks:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@if variables.player.courage > 7\n::Aries:: You are fearless now.\n@else\n  @if variables.player.courage > 3\n  ::Aries:: You are getting braver.\n  @else\n  ::Aries:: You still seem unsure.\n  @endif\n@endif\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"else",children:(0,r.jsx)(n.code,{children:"@else"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@else\n"})}),"\n",(0,r.jsx)(n.p,{children:"Defines a fallback branch that applies if no previous condition matched."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optional"}),"\n",(0,r.jsxs)(n.li,{children:["May appear only once per ",(0,r.jsx)(n.code,{children:"@if"})," block"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"endif",children:(0,r.jsx)(n.code,{children:"@endif"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@endif\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ends a conditional block."}),"\n",(0,r.jsxs)(n.p,{children:["Every ",(0,r.jsx)(n.code,{children:"@if"})," must have a matching ",(0,r.jsx)(n.code,{children:"@endif"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"script-player-feedback",children:"Script Player Feedback"}),"\n",(0,r.jsx)(n.p,{children:"In the Script Player:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@if"}),", ",(0,r.jsx)(n.code,{children:"@else"}),", and ",(0,r.jsx)(n.code,{children:"@endif"})," lines are visible"]}),"\n",(0,r.jsx)(n.li,{children:"The meta box shows condition results (TRUE/FALSE)"}),"\n",(0,r.jsx)(n.li,{children:"Inactive lines are dimmed and show which condition is blocking them"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"state-assignment",children:"State Assignment"}),"\n",(0,r.jsx)(n.h3,{id:"set",children:(0,r.jsx)(n.code,{children:"@set"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@set <target> = <expression>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Defines an assignment that may modify runtime state."}),"\n",(0,r.jsxs)(n.p,{children:["The assignment target ",(0,r.jsx)(n.strong,{children:"must"})," follow the standard resolution pattern:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<collection>.<_sid>.<property>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@set variables.player.courage = variables.player.courage + 1\n@set items.sword.condition = broken\n@set defaults.quest.forestTrial.started = true\n"})}),"\n",(0,r.jsx)(n.h4,{id:"evaluation-context-1",children:"Evaluation Context"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export context"}),"\nThe assignment is preserved but not executed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simulation context"}),"\nThe assignment updates simulated state."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Runtime context"}),"\nThe assignment updates game state as defined by the engine."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"rules",children:"Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"One assignment per line"}),"\n",(0,r.jsx)(n.li,{children:"Left-hand side must be a writable reference"}),"\n",(0,r.jsx)(n.li,{children:"Right-hand side must be a valid expression"}),"\n",(0,r.jsx)(n.li,{children:"No side effects outside of the assignment itself"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"compound-assignment-operators",children:"Compound Assignment Operators"}),"\n",(0,r.jsx)(n.p,{children:"You can use compound assignment operators for brevity when performing arithmetic operations:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Operator"}),(0,r.jsx)(n.th,{children:"Meaning"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+="})}),(0,r.jsx)(n.td,{children:"Add and assign"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"@set variables.player.hp += 5"})," (same as ",(0,r.jsx)(n.code,{children:"= variables.player.hp + 5"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-="})}),(0,r.jsx)(n.td,{children:"Subtract and assign"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@set variables.player.hp -= 3"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"*="})}),(0,r.jsx)(n.td,{children:"Multiply and assign"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@set variables.player.level *= 2"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/="})}),(0,r.jsx)(n.td,{children:"Divide and assign"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@set variables.player.mp /= 2"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"^="})}),(0,r.jsx)(n.td,{children:"Exponentiate and assign"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@set variables.player.power ^= 2"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits for dialogue writers:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Avoid repeating long variable paths"}),"\n",(0,r.jsx)(n.li,{children:"Reduce opportunities for typos"}),"\n",(0,r.jsx)(n.li,{children:"Make intent clearer at a glance"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example comparison:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"// Verbose form (still supported)\n@set variables.player.quest.forestTrial.jobsDone = variables.player.quest.forestTrial.jobsDone + 1\n\n// Compact form (equivalent)\n@set variables.player.quest.forestTrial.jobsDone += 1\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"inline-interpolation-",children:["Inline Interpolation (",(0,r.jsx)(n.code,{children:"${}"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["Inline interpolation allows you to ",(0,r.jsx)(n.strong,{children:"embed values from the evaluation context directly into text"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"It is commonly used inside actor lines, narration, and other plain-text content."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"${ expression }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Expressions inside ",(0,r.jsx)(n.code,{children:"${}"})," follow the same resolution rules as control flow and assignments."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Currently ",(0,r.jsx)(n.code,{children:"variables"})," collection is supported for interpolation, but support for ",(0,r.jsx)(n.code,{children:"quest"}),", ",(0,r.jsx)(n.code,{children:"items"}),", and ",(0,r.jsx)(n.code,{children:"actors"})," is planned for future versions."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,r.jsx)(n.p,{children:"Inline interpolation is designed to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Insert dynamic values into dialogue and narration"}),"\n",(0,r.jsx)(n.li,{children:"Reference variables and document properties"}),"\n",(0,r.jsx)(n.li,{children:"Keep scripts readable and close to natural language"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["It does ",(0,r.jsx)(n.strong,{children:"not"})," execute logic and does ",(0,r.jsx)(n.strong,{children:"not"})," mutate state."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"examples-2",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Aries:: I feel like my courage is at ${variables.player.courage} today.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Narrator:: You have ${variables.player.gold} coins left.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"::Narrator:: Quest completed: ${quest.libraryVisit.title}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"supported-expressions",children:"Supported Expressions"}),"\n",(0,r.jsxs)(n.p,{children:["Inline interpolation supports ",(0,r.jsx)(n.strong,{children:"simple, read-only expressions"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Property access"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"${variables.player.courage}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"${quest.libraryVisit.courage}\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The exact capabilities depend on the target engine or simulation environment."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h3,{id:"what--is-not",children:["What ",(0,r.jsx)(n.code,{children:"${}"})," Is Not"]}),"\n",(0,r.jsx)(n.p,{children:"Inline interpolation is intentionally limited."}),"\n",(0,r.jsxs)(n.p,{children:["It does ",(0,r.jsx)(n.strong,{children:"not"})," support:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Control flow (",(0,r.jsx)(n.code,{children:"if"}),", ",(0,r.jsx)(n.code,{children:"else"}),", loops)"]}),"\n",(0,r.jsx)(n.li,{children:"Assignments or state mutation"}),"\n",(0,r.jsx)(n.li,{children:"Function calls"}),"\n",(0,r.jsx)(n.li,{children:"Access to engine APIs"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["All logic and decision-making must be expressed using ",(0,r.jsx)(n.code,{children:"@"})," directives or handled by the target engine."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"relationship-to-control-flow",children:"Relationship to Control Flow"}),"\n",(0,r.jsxs)(n.p,{children:["Inline interpolation does ",(0,r.jsx)(n.strong,{children:"not"})," affect whether a line is included or excluded."]}),"\n",(0,r.jsxs)(n.p,{children:["Control flow is handled exclusively by ",(0,r.jsx)(n.code,{children:"@if"}),", ",(0,r.jsx)(n.code,{children:"@elseif"}),", ",(0,r.jsx)(n.code,{children:"@else"}),", and ",(0,r.jsx)(n.code,{children:"@endif"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"@if quest.libraryVisit.courage > 2\n  ::Aries:: I feel confident (${quest.libraryVisit.courage}).\n@endif\n"})}),"\n",(0,r.jsx)(n.p,{children:"In this example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@if"})," determines whether the line exists"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"${}"})," only affects what is displayed"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"data-resolution-state-vs-defaults",children:"Data Resolution: State vs Defaults"}),"\n",(0,r.jsxs)(n.p,{children:["By design, ",(0,r.jsx)(n.strong,{children:"all property lookups resolve to runtime state by default"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"${variables.player.courage}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To explicitly reference the authored default value, use the ",(0,r.jsx)(n.code,{children:"defaults"})," root:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:"${defaults.variables.player.courage}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"resolution-summary",children:"Resolution Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Expression"}),(0,r.jsx)(n.th,{children:"Resolves To"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"variables.x.y"})}),(0,r.jsx)(n.td,{children:"Runtime variable state"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"defaults.variables.x.y"})}),(0,r.jsx)(n.td,{children:"Authored variable default"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"quest.x.y"})}),(0,r.jsx)(n.td,{children:"Runtime quest state (not available yet)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"defaults.quest.x.y"})}),(0,r.jsx)(n.td,{children:"Authored quest default (not available yet)"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Whitespace inside ",(0,r.jsx)(n.code,{children:"${}"})," is ignored"]}),"\n",(0,r.jsxs)(n.li,{children:["Unresolved expressions may be:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"left untouched"}),"\n",(0,r.jsx)(n.li,{children:"replaced with a fallback value"}),"\n",(0,r.jsxs)(n.li,{children:["handled by the target engine\n",(0,r.jsx)(n.em,{children:"(implementation-specific)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"mental-model",children:"Mental Model"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["If it starts with ",(0,r.jsx)(n.code,{children:"@"}),", it changes or decides something.\nIf it\u2019s inside ",(0,r.jsx)(n.code,{children:"${}"}),", it only displays something."]})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This separation is intentional and central to Drafft\u2019s scripting philosophy."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"inline-json",children:"Inline JSON"}),"\n",(0,r.jsxs)(n.p,{children:["Since v1.0.13 it is possible to inline standard JSON in both speech and commands lines. ",(0,r.jsx)(n.code,{children:"%json"})," variable will contain parsed content."]}),"\n",(0,r.jsx)(n.p,{children:"Examples:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-uaf",children:'::Reporter:: Now let\'s take a look at the weather for today.\n<CutTo(Location1)> {"weather":"rainy"}\n::FieldReporter:: Not looking very good here. {"props":["umbrella","raincoat", "microphone"]}\n<CutTo(Studio)>\n::Reporter:: What\'s the traffic on your side Mike?\n<CutTo(Location2)> {"traffic": {"cars": "low", "trucks":"none"}}\n::Mike:: Low traffic in this area.\n'})}),"\n",(0,r.jsxs)(n.p,{children:["JSON can be transformed at export time as well, see ",(0,r.jsx)(n.a,{href:"./exporting#inline-json",children:"Export Mappings"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-misconceptions",children:"Common Misconceptions"}),"\n",(0,r.jsx)(n.p,{children:"A few clarifications that help avoid common sources of confusion:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["\u201cMy ",(0,r.jsx)(n.code,{children:"@if"})," didn\u2019t run during export.\u201d"]}),"\nThis is expected. Control flow directives are ",(0,r.jsx)(n.strong,{children:"not evaluated during export"}),". They describe intent and are preserved for the target engine or simulation environment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u201cCommands execute when the script is loaded.\u201d"}),"\nDrafft never executes commands. Commands are ",(0,r.jsx)(n.strong,{children:"descriptive markers"})," whose execution is entirely up to the game engine or tools consuming the exported data."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u201cThe Dialogue Simulator defines how scripts behave in-game.\u201d"}),"\nThe Dialogue Simulator is a ",(0,r.jsx)(n.strong,{children:"preview and debugging tool"}),". It evaluates scripts using its own evaluation context, but the game engine is always the final authority."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u201cDrafft replaces game logic.\u201d"}),"\nDrafft describes ",(0,r.jsx)(n.strong,{children:"narrative structure, flow, and intent"}),". Game logic, rules, and systems live in the engine."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);